<%= form_for(@appointment, class: 'reg-page') do |f| %>
  <% if current_user %>
    <div class="field">
      <%= f.label :clinic %>
      <%= f.select :clinic_id,
                   current_user.favorite_clinics.map { |favorite_clinic| [favorite_clinic.clinic.name, favorite_clinic.clinic.id] },
                   { include_blank: true },
                   { class: 'form-control' }
      %>
    </div>
    <div class="field">
      <%= f.label :doctor %>
      <%= f.select :doctor_id,
                   current_user.favorite_doctors.map { |favorite_doctor| [favorite_doctor.doctor.name, favorite_doctor.doctor.id] },
                   { include_blank: true },
                   { class: 'form-control' }
      %>
    </div>
  <% else %>
    <div class="field">
      <%= f.label :user_name, 'Full Name' %><br>
      <%= f.text_field :user_name, class: 'form-control' %>
    </div>
    <div class="field">
      <%= f.label :email %><br>
      <%= f.text_field :email, class: 'form-control' %>
    </div>
    <div class="field">
      <%= f.label :phone %><br>
      <%= f.text_field :phone, class: 'form-control' %>
    </div>
    <div class="field">
      <%= f.label :clinic %>
      <%= f.select :clinic_id,
                   Clinic.all.map { |clinic| [clinic.name, clinic.id] },
                   { include_blank: true },
                   { class: 'form-control' }
      %>
    </div>
    <div class="field">
      <%= f.label :doctor %>
      <%= f.select :doctor_id,
                   Doctor.all.map { |doctor| [doctor.name, doctor.id] },
                   { include_blank: true },
                   { class: 'form-control' }
      %>
    </div>
  <% end %>
  <div class="field form-group">
    <%= f.label :start_time %><br>
    <%= f.datetime_select :start_time %>
  </div>
  <!--
  <div class="field form-group">
    <%= f.label :end_time %><br>
    <%= f.datetime_select :end_time %>
  </div>
  -->
  <div class="actions">
    <%= f.submit class: 'btn-u pull-right' %>
  </div>
<% end %>

<script type="text/javascript">
  $('.input-group').datetimepicker({sideBySide: true, minDate: new Date(), stepping: 10, defaultDate: new Date()});
</script>
